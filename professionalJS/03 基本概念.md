# 第三章 基本概念

## 3.1 语法

### 3.1.1 区分大小写

​	ECMAScript中的一切都区分大小写，包括变量、函数名和操作符。

### 3.1.2 标识符

​	标识符：变量、函数、属性的名字，或者函数的参数。

​	标识符可以是按照下列格式规则组合起来的一个或多个字符：

- 第一个字符必须是字母、下划线（_） 或一个美元符号（$）；

- 其它字符可以是字母、下划线、美元符号或数字。

  按照惯例，采用驼峰大小写格式。与ECMAScript内置的函数和对象命名格式保持一致。

### 3.1.3 注释

​	单行注释：//

​	块级注释：

```javascript
/**
 **
 **/
```

### 3.1.4 严格模式

​	严格模式为Js定义了一种不同的解析与执行模式。在严格模式下，ECMAScript3中的一些不确定的行为将得到处理，而且对某些不安全的操作也会抛出错误。

​	启用严格模式：在顶部添加如下代码：“use strict”；

​	这行代码是一个编译指示，用于告诉支持的Js引擎切换到严格模式。

​	严格模式下，Js的执行结果会有很大不同。

### 3.1.5 语句

​	ECMAScript中的语句以一个分号结尾；

​	开发中省略号不要省略。

### 3.1.6 关键字和保留字

​	关键字：有特定用途，用于表示控制语句的开始或结束。

![屏幕快照 2017-03-02 下午3.09.59](/Users/songyechun/Desktop/屏幕快照 2017-03-02 下午3.09.59.png)

​	保留字：在将来可能会成为关键字。

​	开发中不要将关键字和保留字作为标识符。

## 3.3 变量

​	ECMAScript的变量是松散类型的变量。

​	松散类型：可以用来保存任何类型的数据。每个变量仅仅是一个用于保存值的占位符而已。

​	定义变量时要使用var 操作符，后跟变量名。

```javascript
var message; // undefined
var message = "hi";
```

​	不要在开发中修改变量所保存值的类型。

​	var操作符定义的变量将成为定义该变量的作用域中的局部变量。就是说：如果在函数中使用var 定义一个变量，那么这个变量在函数推出后就会被销毁。

​	如果省略var操作符，就会创建一个全局变量。

​	不要在开发中省略var。

​	可以使用一条语句定义多个变量。

```javascript
var message = "hi",
	found = false,
	age = 29;
```

## 3.4 数据类型

​	ECMAScript中有5种简单数据类型：

- Undefined

- Null

- Boolean

- Number

- String

  1种复杂数据类型

- Object：由一组无序的名值对组成的

  ECMAScript不支持任何创建自定义类型的机制，所有值最终都将是上述6种数据类型之一。

### 3.4.1 typeof操作符

​	typeof：检测给定变量的数据类型。

​	typeof操作符的操作数可以是变量，也可以是数值字面量。

​	注意：typeof是一个操作符而不是函数，因此可以使用圆括号但不是必须的。

![屏幕快照 2017-03-02 下午3.40.22](/Users/songyechun/Desktop/屏幕快照 2017-03-02 下午3.40.22.png)

### 3.4.2 Undefined 类型

​	Undefined类型只有一个值，即特殊的undefined。

​	在使用var声明变量但未对其加以初始化时，这个变量的值就是undefined。

![屏幕快照 2017-03-02 下午3.57.47](/Users/songyechun/Desktop/屏幕快照 2017-03-02 下午3.57.47.png)



​	上图说明，对未初始化和未声明的变量执行typeof操作符都返回了undefined值。

### 3.4.3 Null 类型

​	Null类型是第二个只有一个值的数据类型，这个特殊的值时Null。

​	从逻辑角度来看，null值表示一个空对象指针，这也是使用typeof操作符检测null值会返回“object”的原因。

​	如果定义一个变量准备在将来用于保存对象，那么最好将该变量初始化为null而不是其它值。

​	undefined值时派生自null值的。

```javascript
null == undefined; // true
```

### 3.4.4 Boolean 类型

​	Boolean类型只有两个字面值：true和false。这两个值与数字值不是一回事，因此true不一定等于1，而false也不一定等于0。

​	需要注意，Boolean类型的字面值true和false是区分大小写的。

​	虽然Boolean类型的字面值只有两个，但ECMAScript中所有类型的值都有与这两个Boolean值等价的值。

​	可以调用转型函数Boolean()，将一个值转换为其对应的Boolean值。

### 3.4.5 Number 类型

​	Number类型使用IEEE754格式来表示整数和浮点数值。

​	最基本的数值字面量格式是十进制整数。除了十进制表示外，整数还可以通过八进制或十六进制的字面值来表示。其中，八进制字面值的第一位必须是0，然后是八进制数字序数，如果字面值中的数超出了范围（0～7），那么前面导零将被忽略，后面的数值将被当作十进制数值解析。

​	八进制字面量在严格模式下是无效的，会导致支持的Js引擎抛出错误。

​	十六进制字面值的前两位必须是0x，后跟任何十六进制数字（0～9及A～F）。其中A～F可以大写，也可以小写。

​	在进行算数计算时，所有以八进制和十六进制表示的数值最终都将被转换成十进制数值。

#### 1. 浮点数值

​	浮点数值，就是该值中必须包含一个小数点，而且小数点后面必须至少有一位数字。虽然小数点前面可以没有整数，但不推荐这种写法。

​	由于保存浮点数值需要的内存空间是保存整数值的两倍，因此ECMAScript会不失时机地将浮点数值转换为整数。如果小数点后面没有跟任何数字，那么这个数值就可以作为整数值来保留。如果浮点数值本身表示的就是一个整数，那么该值也会被转换为整数。

​	对于极大或极小的数值，可以用e表示法表示的浮点数值表示。用e表示法表示的数值等于e前面的数值乘以10的指数次幂。

​	浮点数值的最高精度是17位，但在进行算数计算时其精度远远不如整数。例如:

![屏幕快照 2017-03-02 下午4.40.29](/Users/songyechun/Desktop/屏幕快照 2017-03-02 下午4.40.29.png)

因此，永远不要测试某个特定的浮点数值。这是使用基于IEEE754数值的浮点计算的通病。

#### 2. 数值范围

​	由于内存的限制，ECMAScript并不能保存世界上所有的数值。

​	最小值在Number.MIN_VALUE，最大值在Number.MAX_VALUE。如果某次计算的结果超出了这个范围的值，这个数值会自动转换成特殊的Infinity值，如果是小的范围会转换成0，如果是负数大的方向上会转换为-Infinity。

![屏幕快照 2017-03-03 上午9.37.59](/Users/songyechun/Desktop/屏幕快照 2017-03-03 上午9.37.59.png)

#### 3. NaN

​	NaN，即非数值是一个特殊的数值，用于表示一个本来返回数值的操作数未返回数值的情况。

​	NaN有两个特点：

- 任何涉及NaN的操作都会返回NaN。

- NaN与任何值都不想等，包括NaN本身。

  可以使用`isNaN()`函数来判断一个参数是否“不是数值”。

#### 4. 数值转换

​	有3个函数可以把非数值转换为数值：

可以用于任何数据类型的：

- Number()

用于将字符串转换成数值：

- parseInt()

- parseFloat()

  Number()函数在转换字符串时比较复杂而且不够合理，因此在处理整数的时候更常用的是ParseInt()函数。

​	如果字符以“0x”开头且后跟数字字符，就会将其当做一个十六进制整数；如果字符以“0”开头且后跟数字字符，则会将其当做一个八进制数来解析。

​	parseInt()的第二个参数很重要，决定了被转换成什么进制的数。

​	parseFloat()只解析十进制值，十六进制格式的字符串始终会被转换为0。

### 3.4.6 String 类型

​	String类型用于表示由零或多个16位Unicode字符组成的字符序列，即字符串。

​	单引号和双引号没有什么区别，但是要成对。

#### 1. 字符字面量

​	String数据类型包含一些特殊的字符字面量，也叫转义序列，用于表示非打印字符，或者具有其它用途的字符。![屏幕快照 2017-03-03 上午10.44.05](/Users/songyechun/Desktop/屏幕快照 2017-03-03 上午10.44.05.png)

​	这些字面量可以出现在字符串中的任意位置，这些字符字面量可以出现在字符串中的任意位置，而且也将被作为一个字符来解析。

#### 2. 字符串的特点

​	ECMAScript中的字符串是不可变量，字符串一旦创建，它们的值就不能改变。要改变某个变量保存的字符串，首先要销原来的字符串，然后再用另一个包含新值的字符串填充该变量。

#### 3. 转换为字符串

​	把一个值转换为字符串有两种方式：

- toString()，返回相应值的字符串表现，但是null和undefined值没有这个方法。
- String()。可以将任何类型的值转换为字符串。null和undefined则会返回对应的字面量。

### 3.4.7 object 类型

​	ECMAScript中的对象其实就是一组数据和功能的集合。对象可以通过执行new操作符后跟要创建的对象类型的名称来创建。而创建object类型的实例并为其添加属性和方法，就可以创建自定义对象。

```javascript
var o = new object();
```

​	在ECMAScript中，如果不给构造函数传递参数，则可以省略后面的那一对括号，但不推荐。

​	object类型是所有它的实例的基础。object类型所具有的任何属性和方法也同样存在于更具体的对象中。

​	object的每个实例都具有下列属性和方法：

- Constructor：保存着用于创建当前对象的函数，对于前面的例子，构造函数就是object()；
- hasOwnProperty(propertyName)：用于检查给定的属性在**当前对象实例**中是否存在。其中，参数的属性名（propertyName）必须以字符串形式指定；
- isPrototypeOf(object)：用于检查传入的对象是否是另一个对象的原型；
- propertyIsEnumberable(propertyName)：用于检查给定的属性是否能够使用for-in语句来枚举；
- toLocalString()：返回对象的字符串表示，该字符串与执行环境的地区对应；
- toString()：返回对象的字符串表示；
- valueOf()：返回对象的字符串、数值或布尔值表示。

## 3.5 操作符

​	操作符就是运算符号，加号、减号、与、或、非等。

### 3.5.1 一元操作符

​	一元操作符：只能操作一个值的操作符

#### 1. 递增和递减操作符

​	两种：

- 前置型，位于操作的变量之前
- 后置型，位于要操作的变量之后

 #### 2. 一元加和减操作

### 3.5.2 位操作符

#### 1. 按位非

​	按位非符号由一个波浪线（~）表示。执行按位非的结果就是返回数值的反码。
​	非操作的本质：操作数的负值减1。

```javascript
var num1 = 25;
var num2 = ~num2;
var num3 = -num2 - 1;
num2 === num3; // true
```

由于按位非是在数值表示的最底层执行操作，因此速度更快。

#### 2. 按位与

​	&符号表示，有两个操作数。

#### 3. 按位或

#### 4. 按位异或

​	由插入符号（^）表示。相同为0，相异为1。

#### 5. 左移

​	左移符号（<<），将数值的所有位向左移动指定的位数，左移不会影响操作数的符号位。

#### 6. 有符号的右移

​	有符号右移操作符（>>）。

#### 7. 无符号右移

​	无符号右移（>>>）

### 3.5.3 布尔操作符

​	与或非。

### 3.5.4 乘性操作符

​	乘法、除法和求模。

### 3.5.5 加性操作符

### 3.5.6 关系操作符

### 3.5.7 相等操作符

### 3.5.8 条件操作符

### 3.5.9 赋值操作符

### 3.5.10 逗号操作符

​	可以在一条语句中执行多个操作。

## 3.6 语句

​	语句又称控制流语句。通常使用一个或多个关键字来完成给定任务。

### 3.6.1 if语句

### 3.6.2 do-while语句

​	一种后测试循环语句，循环体中的代码至少要被执行一次。

### 3.6.3 while语句

​	一种前测试循环语句，循环体内代码可能用于不会执行。

### 3.6.4 for 语句

​	一种前测试循环语句，具有在执行循环之前初始化变量和定义循环后要执行的代码的能力，也有可能不会执行循环体中的代码。

​	由于ECMAScript中不存在块级作用域，因此在循环内部定义的变量也可以在外部访问到。

### 3.6.5 for-in语句

​	一种精准的迭代语句，可以用来枚举对象的属性。

```javascript
for (property in expression) statement;
```

​	ECMAScript对象的属性没有顺序。因此，通过for-in循环输出的属性名的顺序是不可预测的。具体来讲，所有属性都会被返回一次，但返回的先后次序可能会因为浏览器而异。

​	但是，如果表示要迭代的对象的变量值为null或undefined，for-in语句会抛出错误。现在不再抛出错误，而只是不执行循环体。

### 3.6.6 label语句

​	label语句可以在代码中添加标签，label语句的语法如下：

```javascript
label: atatement;
```

举一个🌰：

```javascript
start: for(var i = 0; i < count; i++) {
  alert(i);
}
```

​	这个例子中定义的start标签可以在将来由break或continue语句引用。加标签的语句一般都要与for语句等循环语句配合使用。

### 3.6.7 break和continue语句

​	break和continue语句用于在循环中精确地控制代码的执行。

- break语句：会立即退出循环，强制继续执行循环后面的语句；

- continue语句：也会立即退出循环，但退出循环后会从循环的顶部继续执行。

  可以与label语句配合使用。

### 3.6.8 with 语句

​	将代码的作用域设置到一个特定的对象中。with语句的语法如下：

```javascript
with(expression) statement;
```

开发中不要使用。

### 3.6.9 switch语句

## 3.7 函数

​	通过函数可以封装任意多条语句，而且可以在任何地方、任何时候调用执行。

​	函数会在执行完return语句之后停止并立即退出。位于return语句之后的任何代码都永远不会执行。

​	一个函数中可以包含多个return语句。

​	另外，return语句也可以不带有任何返回值。这种情况下，函数在停止执行后将返回undefined值。

### 3.7.1 理解参数

​	ECMAScript函数不介意传递进来多少个参数，也不在乎传进来参数是什么数据类型。就是说，即便定义的函数只接受两个参数，在调用这个函数时未必一定要传递两个参数。可以传递一个、三个甚至不传递参数，而解析器永远不会有什么怨言。

​	因为，在ECMAScript中的参数在内部是用一个数组来表示的。函数接收到的始终都是这个数组，而不关心数组中包含哪些参数。如果这个数组中不包含任何元素，无所谓；如果包含多个元素，也没有问题。实际上，在函数体内可以通过arguments对象来访问这个参数数组，从而获取传递给函数的每一个参数。

​	其实，arguments对象只是与数组类似，因为可以使用方括号语法访问它的每一个元素。使用length属性来确定传递进来多少个参数。

​	ECMAScript函数的一个重要特点：命名的参数只是提供便利，但不是必需的。

​	arguments对象可以与命名参数一起使用。

​	没有传递值的命名参数将自动被赋予undefined值。这就跟定义了变量但又没初始化一样。

​	但是，严格模式下，对如何使用arguments对象做出了一些限制。

- 对arguments元素赋值会变得无效；
- 重写arguments的值会导致语法错误。

### 3.7.2 没有重载

​	ECMAScript函数不能像传统意义上那样实现重载。如果一个函数被定义了两次，后定义的函数会覆盖先定义的函数，因此会调用后定义的函数。













​